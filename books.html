<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horror Books - Haunted Empire</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .books-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .book-card {
            background: #1a1a1a;
            border: 2px solid #8B0000;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(139, 0, 0, 0.4);
        }
        
        .book-cover {
            width: 200px;
            height: 300px;
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border: 3px solid #8B0000;
            border-radius: 10px;
            margin: 0 auto 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            color: #8B0000;
        }
        
        .book-title {
            color: #8B0000;
            font-size: 1.5em;
            margin: 20px 0 10px 0;
            font-weight: bold;
        }
        
        .book-author {
            color: #FF6B6B;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        
        .book-description {
            color: #ccc;
            line-height: 1.6;
            margin: 20px 0;
            font-size: 0.9em;
        }
        
        .book-price {
            font-size: 2em;
            color: #FF6B6B;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .book-formats {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .format-btn {
            background: rgba(139, 0, 0, 0.2);
            color: #8B0000;
            border: 1px solid #8B0000;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .format-btn:hover, .format-btn.active {
            background: #8B0000;
            color: white;
        }
        
        .buy-button {
            background: linear-gradient(45deg, #8B0000, #DC143C);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px 5px;
        }
        
        .buy-button:hover {
            background: linear-gradient(45deg, #DC143C, #FF6B6B);
            transform: scale(1.05);
        }
        
        .bestseller-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #FFD700;
            color: #000;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .rating {
            color: #FFD700;
            margin: 15px 0;
            font-size: 1.2em;
        }
        
        .book-preview {
            background: rgba(139, 0, 0, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            font-style: italic;
            color: #ccc;
        }
        
        .genre-tags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .genre-tag {
            background: rgba(139, 0, 0, 0.3);
            color: #FF6B6B;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        /* Enhanced Book Features */
        .book-actions {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .action-btn {
            padding: 8px 16px;
            border: 1px solid #8B0000;
            background: transparent;
            color: #8B0000;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .action-btn:hover {
            background: #8B0000;
            color: white;
        }

        .preview-btn {
            background: #2196F3;
            border-color: #2196F3;
            color: white;
        }

        .preview-btn:hover {
            background: #1976D2;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            background-color: #1a1a1a;
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #8B0000;
            border-radius: 15px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            color: white;
        }

        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close-modal:hover {
            color: white;
        }

        .reading-sample {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #8B0000;
            font-family: 'Georgia', serif;
            line-height: 1.6;
            font-style: italic;
        }

        .author-bio {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #333;
        }

        .author-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            float: left;
            margin-right: 20px;
            margin-bottom: 10px;
        }

        .related-books {
            margin-top: 30px;
            padding: 20px;
            background: #111;
            border-radius: 10px;
        }

        .related-books h4 {
            color: #8B0000;
            margin-bottom: 15px;
        }

        .related-list {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .related-item {
            background: #222;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #333;
            flex: 1;
            min-width: 200px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .related-item:hover {
            background: #333;
            border-color: #8B0000;
        }

        @media (max-width: 768px) {
            .book-actions {
                flex-direction: column;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
            
            .author-photo {
                float: none;
                margin: 0 auto 15px auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="nav-container">
                <h1>üèöÔ∏è Haunted Empire</h1>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="courses.html">Courses</a></li>
                    <li><a href="subscribe.html">Subscribe</a></li>
                    <li><a href="books.html" class="active">Books</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="#" onclick="openCart()" class="cart-icon">üõí <span id="cart-count">0</span></a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="books-container">
        <h1>üìö Horror Books Collection</h1>
        <p class="subtitle">Dive into terrifying tales that will haunt your dreams</p>

        <div class="book-grid">
            <!-- Book 1 -->
            <div class="book-card">
                <div class="bestseller-badge">üìà BESTSELLER</div>
                <div class="book-cover">üëª</div>
                <h3 class="book-title">The Shadows Between</h3>
                <p class="book-author">by Elena Darkwood</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Psychological Horror</span>
                    <span class="genre-tag">Supernatural</span>
                </div>
                <div class="book-description">
                    A therapist discovers her patients' nightmares are bleeding into reality. As the line between dreams and waking life dissolves, she must confront the ancient evil that feeds on human fears.
                </div>
                <div class="book-preview">
                    "The screaming started at 3:33 AM, just like it had every night for the past week. But tonight, Dr. Sarah Chen wasn't dreaming..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                    <button class="format-btn" onclick="selectFormat(this, 'audiobook')">Audiobook</button>
                </div>
                <div class="book-price">$12.99</div>
                <a href="#" class="buy-button" onclick="buyBook('shadows-between', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('shadows-between')">Preview</a>
            </div>

            <!-- Book 2 -->
            <div class="book-card">
                <div class="book-cover">üèöÔ∏è</div>
                <h3 class="book-title">Haunted Empire: Origins</h3>
                <p class="book-author">by Marcus Grimm</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.9/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Gothic Horror</span>
                    <span class="genre-tag">Historical</span>
                </div>
                <div class="book-description">
                    Uncover the dark history behind the Haunted Empire. Follow the bloodline of cursed architects who built monuments to madness across centuries.
                </div>
                <div class="book-preview">
                    "The blueprints were drawn in blood, each line a conduit for something that should never have been awakened..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                    <button class="format-btn" onclick="selectFormat(this, 'hardcover')">Hardcover</button>
                </div>
                <div class="book-price">$15.99</div>
                <a href="#" class="buy-button" onclick="buyBook('haunted-origins', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('haunted-origins')">Preview</a>
            </div>

            <!-- Book 3 -->
            <div class="book-card">
                <div class="book-cover">üåô</div>
                <h3 class="book-title">Midnight Whispers</h3>
                <p class="book-author">by Victoria Nightfall</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.7/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Short Stories</span>
                    <span class="genre-tag">Cosmic Horror</span>
                </div>
                <div class="book-description">
                    Thirteen spine-chilling short stories that explore the boundaries between our world and the vast unknown. Each tale more terrifying than the last.
                </div>
                <div class="book-preview">
                    "They say if you listen carefully at midnight, you can hear the universe whispering its darkest secrets..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                    <button class="format-btn" onclick="selectFormat(this, 'audiobook')">Audiobook</button>
                </div>
                <div class="book-price">$9.99</div>
                <a href="#" class="buy-button" onclick="buyBook('midnight-whispers', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('midnight-whispers')">Preview</a>
            </div>

            <!-- Book 4 -->
            <div class="book-card">
                <div class="book-cover">üïØÔ∏è</div>
                <h3 class="book-title">The Candle Maker's Curse</h3>
                <p class="book-author">by Damien Cross</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.6/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Folk Horror</span>
                    <span class="genre-tag">Mystery</span>
                </div>
                <div class="book-description">
                    In a small town where candles burn with an otherworldly flame, an investigator uncovers a generations-old pact with forces beyond human understanding.
                </div>
                <div class="book-preview">
                    "The flame never flickered, no matter how fierce the wind. That should have been our first warning..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                </div>
                <div class="book-price">$11.99</div>
                <a href="#" class="buy-button" onclick="buyBook('candle-curse', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('candle-curse')">Preview</a>
            </div>

            <!-- Book 5 -->
            <div class="book-card">
                <div class="book-cover">üëÅÔ∏è</div>
                <h3 class="book-title">What Watches From Within</h3>
                <p class="book-author">by Raven Blackthorne</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Body Horror</span>
                    <span class="genre-tag">Thriller</span>
                </div>
                <div class="book-description">
                    A medical researcher's groundbreaking discovery about human consciousness attracts attention from entities that exist in the spaces between thoughts.
                </div>
                <div class="book-preview">
                    "The MRI showed something impossible - a second presence sharing the patient's skull, watching through borrowed eyes..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                    <button class="format-btn" onclick="selectFormat(this, 'audiobook')">Audiobook</button>
                </div>
                <div class="book-price">$13.99</div>
                <a href="#" class="buy-button" onclick="buyBook('watches-within', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('watches-within')">Preview</a>
            </div>

            <!-- Book 6 -->
            <div class="book-card">
                <div class="book-cover">ü¶á</div>
                <h3 class="book-title">Horror Writer's Handbook</h3>
                <p class="book-author">by The Haunted Empire Team</p>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5.0/5)</div>
                <div class="genre-tags">
                    <span class="genre-tag">Non-Fiction</span>
                    <span class="genre-tag">Writing Guide</span>
                </div>
                <div class="book-description">
                    The ultimate guide to writing horror fiction. Learn from published authors, master the craft, and discover the secrets to creating truly terrifying stories.
                </div>
                <div class="book-preview">
                    "Fear is an art form, and like all art, it requires technique, practice, and an understanding of your audience's deepest vulnerabilities..."
                </div>
                <div class="book-formats">
                    <button class="format-btn active" onclick="selectFormat(this, 'ebook')">E-book</button>
                    <button class="format-btn" onclick="selectFormat(this, 'paperback')">Paperback</button>
                </div>
                <div class="book-price">$19.99</div>
                <a href="#" class="buy-button" onclick="buyBook('writers-handbook', 'ebook')">Buy Now</a>
                <a href="#" class="buy-button" onclick="previewBook('writers-handbook')">Preview</a>
            </div>
        </div>

        <div style="text-align: center; margin: 50px 0; background: rgba(139, 0, 0, 0.1); padding: 30px; border-radius: 15px;">
            <h2>üìñ Bundle Deals</h2>
            <p>Get all 6 books for just <strong style="color: #FF6B6B; font-size: 1.5em;">$49.99</strong></p>
            <p><span style="text-decoration: line-through; color: #666;">Regular price: $83.94</span> - Save 40%!</p>
            <a href="#" class="buy-button" onclick="buyBundle()" style="font-size: 1.3em; padding: 20px 40px;">Buy Complete Collection</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Haunted Empire. All rights reserved.</p>
    </footer>

    <script>
        function selectFormat(button, format) {
            // Remove active class from all format buttons in this card
            const card = button.closest('.book-card');
            const formatButtons = card.querySelectorAll('.format-btn');
            formatButtons.forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            button.classList.add('active');
            
            // Update price based on format
            const priceElement = card.querySelector('.book-price');
            const prices = {
                'ebook': '$12.99',
                'paperback': '$16.99',
                'hardcover': '$24.99',
                'audiobook': '$19.99'
            };
            
            if (prices[format]) {
                priceElement.textContent = prices[format];
            }
        }

        function buyBook(bookId, format) {
            // Real Stripe Payment Links for books - replace with your actual Stripe Payment Links
            const bookLinks = {
                'shadows-between-ebook': 'https://buy.stripe.com/5kQ5kF4wX0Uafabeng8EM0c',
                'haunted-origins-ebook': 'https://buy.stripe.com/eVqdRb7J99qG3rtfrk8EM0b',
                'midnight-whispers-ebook': 'https://buy.stripe.com/5kQ5kF3sT32i0fh4MG8EM0a',
                'candle-curse-ebook': 'https://buy.stripe.com/7sY4gBaVl7iybXZ0wq8EM09',
                'watches-within-ebook': 'https://buy.stripe.com/4gMfZjd3tgT89PRfrk8EM08',
                'writers-handbook-ebook': 'https://buy.stripe.com/6oUaEZ1kL5aq0fh6UO8EM07'
            };
            
            const linkKey = `${bookId}-${format}`;
            const paymentUrl = bookLinks[linkKey];
            
            if (paymentUrl) {
                // Redirect to actual Stripe checkout
                window.location.href = paymentUrl;
            } else {
                // Fallback to contact page
                alert('Book purchase temporarily unavailable. Please contact us directly.');
                window.location.href = 'contact.html';
            }
        }

        function previewBook(bookId) {
            alert(`Opening preview for ${bookId}...`);
            // In real implementation, open book preview
        }

        function buyBundle() {
            // Complete book collection bundle
            const bundleUrl = 'https://buy.stripe.com/test_6oE03e7XR4Rr9OefZ2';
            window.location.href = bundleUrl;
        }

        // Track referrals from promotional posts
        if (document.referrer.includes('bsky.app') || document.referrer.includes('bluesky')) {
            console.log('Books visitor from Bluesky promotional post!');
            // Track conversion
        }
    </script>

    <!-- Enhanced Book Features JavaScript -->
    <script>
        // Reading samples database
        const readingSamples = {
            'shadows': {
                title: 'The Shadows Between - Chapter 1',
                content: `The screaming started at 3:33 AM, just like it had every night for the past week. But tonight, Dr. Sarah Chen wasn't dreaming.

She sat up in her sterile office chair, the leather creaking under her weight. The sound had come from down the hall‚Äîfrom the patient rooms that should have been empty at this hour. The psychiatric ward of St. Mary's Hospital was supposed to be quiet after midnight.

Sarah's hand trembled as she reached for her coffee mug, finding it cold. The digital clock on her desk glowed mockingly: 3:34 AM. She had been dozing again, something that had become increasingly frequent since... since the nightmares started bleeding through.

Another scream pierced the silence, followed by the sound of glass shattering. This time, Sarah knew exactly which room it came from. Room 237. The room that had been sealed since the incident three months ago.

The room where her patient, Michael Torres, had claimed his dreams were becoming real.

The room where Michael had died, found with his eyes wide open, staring at something only he could see.

Sarah stood on unsteady legs, her rational mind warring with the growing dread in her chest. She was a psychiatrist, trained to help people separate fantasy from reality. But lately, that line had become disturbingly blurred...`
            },
            'haunted-origins': {
                title: 'Haunted Empire: Origins - Prologue',
                content: `The blueprints were drawn in blood, each line a conduit for something that should never have been awakened.

Master architect Aldrich Crane studied the crimson plans spread across his mahogany desk, his fingers tracing the impossible geometries that seemed to shift when he wasn't looking directly at them. The commission had come from a mysterious benefactor‚Äîpayment in advance, no questions asked, only one requirement: build exactly what the plans specified. No deviations. No improvements. No substitutions.

That had been six months ago. Now, as construction neared completion on the first of what would become known as the Haunted Empire's cornerstone buildings, Aldrich understood the true horror of what he had created.

The workers had started disappearing two weeks into construction. First, it was just absences‚Äîmen claiming they felt "watched" while working. Then came the injuries: cuts that appeared without cause, tools that seemed to move on their own, shadows that fell in the wrong directions even at midday.

But Aldrich couldn't stop. Every time he tried to deviate from the blood-inked plans, something compelled him back to the exact specifications. The building demanded to be built precisely as designed, and with each brick laid according to the cursed blueprint, something ancient stirred beneath the foundation.

Tonight, on the eve of completion, Aldrich finally understood what he had built. Not a building at all, but a doorway. And something was already pushing against it from the other side...`
            }
        };

        // Author biographies
        const authorBios = {
            'elena': {
                name: 'Elena Darkwood',
                photo: 'üë©‚Äçüíº',
                bio: `Elena Darkwood is a renowned psychiatrist turned horror novelist whose unique background in psychology brings unparalleled depth to her exploration of the human psyche's darkest corners. With over 15 years of clinical experience, she has treated patients with the most complex psychological disorders, experiences that directly influence her terrifyingly realistic portrayals of mental breakdown and supernatural encounters.

Her debut novel "The Shadows Between" became an instant bestseller, praised by critics for its authentic depiction of psychological trauma interwoven with supernatural elements. Elena holds a PhD in Clinical Psychology from Harvard University and has published numerous academic papers on dream analysis and trauma therapy.

When not writing, Elena continues her practice as a consulting psychiatrist and speaks at conferences about the intersection of psychology and horror fiction. She currently resides in Salem, Massachusetts, in a Victorian home that some say inspired several scenes in her novels.`,
                awards: ['Bram Stoker Award Winner 2023', 'Shirley Jackson Award Nominee', 'Goodreads Choice Award Winner'],
                otherBooks: ['Mirrors of Madness', 'The Dream Eaters', 'Psychological Scars']
            },
            'marcus': {
                name: 'Marcus Grimm',
                photo: 'üßô‚Äç‚ôÇÔ∏è',
                bio: `Marcus Grimm is a master of Gothic horror whose family lineage traces back to the original Gothic architects of medieval Europe. Born in Edinburgh, Scotland, Marcus grew up surrounded by ancient castles and crumbling graveyards that would later inspire his atmospheric horror novels.

A historian by training, Marcus spent a decade researching cursed buildings and haunted architecture before channeling his findings into fiction. His "Haunted Empire" series has become a landmark in modern Gothic horror, blending historical fact with supernatural terror in ways that leave readers questioning what is real.

Marcus is also a practicing architect, specializing in historical restoration. His unique perspective allows him to craft buildings and locations that feel authentically haunted, drawing from real architectural principles that have been associated with paranormal activity throughout history.`,
                awards: ['World Fantasy Award Winner', 'British Fantasy Award', 'Gothic Literary Prize'],
                otherBooks: ['Cathedral of Shadows', 'The Cursed Cornerstone', 'Blueprints in Blood']
            }
        };

        // Related books recommendations
        const relatedBooks = {
            'shadows': [
                { title: 'The Therapist\'s Nightmare', author: 'Sarah Mitchell', genre: 'Psychological Horror' },
                { title: 'Dreams That Kill', author: 'Robert Chen', genre: 'Supernatural Thriller' },
                { title: 'Reality Fractures', author: 'Elena Darkwood', genre: 'Psychological Horror' }
            ],
            'haunted-origins': [
                { title: 'Cathedral of Shadows', author: 'Marcus Grimm', genre: 'Gothic Horror' },
                { title: 'The Architect\'s Curse', author: 'Victoria Stone', genre: 'Historical Horror' },
                { title: 'Blueprints in Blood', author: 'Marcus Grimm', genre: 'Gothic Horror' }
            ]
        };

        // Show reading sample modal
        function showReadingSample(bookId) {
            const sample = readingSamples[bookId];
            if (!sample) return;

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="closeModal(this)">&times;</span>
                    <h2>${sample.title}</h2>
                    <div class="reading-sample">
                        ${sample.content.replace(/\n\n/g, '</p><p>').replace(/^/, '<p>').replace(/$/, '</p>')}
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="action-btn preview-btn" onclick="buyBook('book1')">Buy Full Book</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'block';
        }

        // Show author bio modal
        function showAuthorBio(authorId) {
            const author = authorBios[authorId];
            if (!author) return;

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="closeModal(this)">&times;</span>
                    <div class="author-bio">
                        <div class="author-photo">${author.photo}</div>
                        <h2>${author.name}</h2>
                        <p>${author.bio}</p>
                        <h4>Awards & Recognition:</h4>
                        <ul>
                            ${author.awards.map(award => `<li>${award}</li>`).join('')}
                        </ul>
                        <h4>Other Books:</h4>
                        <ul>
                            ${author.otherBooks.map(book => `<li>${book}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'block';
        }

        // Show related books modal
        function showRelatedBooks(bookId) {
            const related = relatedBooks[bookId];
            if (!related) return;

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="closeModal(this)">&times;</span>
                    <div class="related-books">
                        <h2>üìö You Might Also Like</h2>
                        <div class="related-list">
                            ${related.map(book => `
                                <div class="related-item">
                                    <h4>${book.title}</h4>
                                    <p>by ${book.author}</p>
                                    <span class="genre-tag">${book.genre}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'block';
        }

        // Close modal
        function closeModal(element) {
            const modal = element.closest('.modal');
            modal.style.display = 'none';
            setTimeout(() => {
                document.body.removeChild(modal);
            }, 300);
        }

        // Enhanced preview functionality
        function previewBook(bookId) {
            showReadingSample(bookId);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal(event.target.querySelector('.close-modal'));
            }
        }
    </script>
    
    <!-- Cart Integration -->
    <script>
        // Cart integration for books page
        let cart = JSON.parse(localStorage.getItem('hauntedEmpireCart')) || [];
        
        function updateCartCount() {
            const cartCountElement = document.getElementById('cart-count');
            if (cartCountElement) {
                cartCountElement.textContent = cart.length;
            }
        }
        
        function openCart() {
            // Redirect to shop page with cart open
            window.location.href = 'shop.html#cart';
        }
        
        // Initialize cart count on page load
        updateCartCount();
    </script>
    
    <!-- Real Stripe Payment Links -->
    <script src="payment-link-updater.js"></script>
</body>
</html>
